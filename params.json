{"name":"Chef s3cmd","tagline":"Chef Cookbook to Install and Manage s3cmd for amazon s3 ","body":"s3cmd-ng Cookbook\r\n================\r\n\r\n[![Build Status](https://travis-ci.org/vkhatri/chef-s3md-ng.svg?branch=master)](https://travis-ci.org/vkhatri/chef-s3cmd-ng)\r\n\r\nThis is a [Chef] cookbook to manage [s3cmd] using LWRP.\r\n\r\nThis cookbook allows to manage different s3cmd config files, sync a directory or sync a s3 file and it can be extracted to a directory.\r\n\r\n\r\n## Repository\r\n\r\nhttps://github.com/vkhatri/chef-s3cmd-ng\r\n\r\n\r\n## Cookbook Dependencies\r\n\r\n- apt\r\n- yum-epel\r\n\r\n\r\n## Recipes\r\n\r\n- `s3cmd::default`      - default recipe (used for run_list)\r\n\r\n- `s3cmd::install`      - install s3cmd\r\n\r\n\r\n## Attributes\r\n\r\n* `default['s3cmd']['setup_epel']` (default: `true`): whether to setup epel repository using cookbook yum-epel\r\n\r\n* `default['s3cmd']['user']` (default: `root`): s3cmd default user, used in lwrp\r\n\r\n* `default['s3cmd']['group']` (default: `root`): s3cmd default group, used in lwrp\r\n\r\n* `default['s3cmd']['mode']` (default: `0750`): s3cmd file/directories permission\r\n\r\n* `default['s3cmd']['umask']` (default: `0027`): s3cmd file/directories umask\r\n\r\n* `default['s3cmd']['manage_sync_dir']` (default: `true`): whether to manage s3 sync dir, used in lwrp `dir`\r\n\r\n* `default['s3cmd']['template_source']` (default: `s3cfg.conf.erb`): s3cmd config file template name for lwrp `s3cmd_cfg`\r\n\r\n* `default['s3cmd']['template_cookbook']` (default: `15`): s3cmd config file template cookbook name for lwrp `s3cmd_cfg`\r\n\r\n* `default['s3cmd']['download_dir']` (default: `/tmp`): s3 download location for lwrp `s3cmd_file`\r\n\r\n* `default['s3cmd']['file']` (default: `nil`): s3cmd default config file location for lwrp `s3cmd_cfg`\r\n\r\n* `default['s3cmd']['binary']` (default: `/usr/bin/s3cmd`): s3cmd binary command location, used by lwrp `s3cmd_dir` and `s3cmd_file`\r\n\r\n* `default['s3cmd']['config']['S3CMD_OPTION']` (default: `S3CMD_OPTION_VALUE`): s3cmd config file attributes for lwrp `s3cmd_cfg`, check lwrp resource file for more details\r\n\r\n\r\n## LWRP Resources\r\n\r\n- `s3cmd_cfg`: create s3cmd config file\r\n- `s3cmd_file`: s3 get file resource which also supports tar file extract\r\n- `s3cmd_dir`: s3 sync directory resource\r\n\r\n\r\n## LWRP s3cmd_cfg\r\n\r\n\r\nLWRP `s3cmd_cfg` is used to create/delete s3cmd config file.\r\n\r\n**Create a s3cmd config file**\r\n\r\n    s3cmd_cfg \"foo\" do\r\n      access_key \"aws s3 access key\"\r\n      secret_key \"aws s3 secret key\"\r\n      file \"file location\"\r\n      user \"user name\"\r\n      group \"group name\"\r\n      region \"aws region name, e.g. Singapore\"\r\n      option \"value\" ..\r\n    end\r\n\r\n**Create a s3cmd config file from a databag**\r\n\r\n    s3cmd_cfg \"foo\" do\r\n      file \"file location\"\r\n      user \"user name\"\r\n      group \"group name\"\r\n      databag \"databag name for aws access/secret key\"\r\n      databag_item \"databag item name to load access_key & secret_key\"\r\n      databag_secret \"encrypted databag secret if any\"\r\n      bucket_location \"aws region name, e.g. Singapore\"\r\n      option \"value\" ..\r\n    end\r\n\r\n\r\n**Delete a s3cmd config file**\r\n\r\n    s3cmd_cfg \"foo\" do\r\n      action :delete\r\n    end\r\n\r\n\r\n**LWRP Options**\r\n\r\nParameters:\r\n\r\n- *file (default: `node['s3cmd']['file']`)* - s3cmd config file location\r\n- *user (default: `node['s3cmd']['user']`)* - s3cmd config file user\r\n- *group (default: `node['s3cmd']['group']`)* - s3cmd config file group\r\n- *mode (default: `node['s3cmd']['mode']`)* - s3cmd config file mode\r\n- *template_source (default: `node['s3cmd']['template_source']`)* - s3cmd config file template source\r\n- *template_cookbook (default: `node['s3cmd']['template_cookbook']`)* - s3cmd config file template cookbook\r\n- *databag (default: `node['s3cmd']['databag']`)* - data bag for `access_key` and `secret_key`\r\n- *databag_item (default: `node['s3cmd']['databag_item']`)* - data bag item\r\n- *databag_secret (default: `node['s3cmd']['databag_secret']`)* - encrypted data bag secret\r\n\r\n\r\n- *access_key (default: `node['s3cmd']['config']['access_key']`)* - s3cmd config access_key\r\n- *secret_key (default: `node['s3cmd']['config']['secret_key']`)* - s3cmd config secret_key\r\n- *bucket_location (default: `node['s3cmd']['config']['bucket_location']`)* - s3cmd config bucket_location / aws region\r\n- *S3CMD_OPTION (default: `DEFAULT_VALUE`)* - s3cmd config option\r\n\r\n\r\n\r\n## LWRP s3cmd_dir\r\n\r\n\r\nLWRP `s3cmd_dir` is a wrapper for `s3cmd sync`.\r\n\r\n**Create a s3cmd sync dir resource**\r\n\r\n    s3cmd_dir \"foo\" do\r\n      s3cfg_file \"s3cmd config file\"\r\n      s3_url \"s3 bucket url\"\r\n      user \"user name\"\r\n      group \"group name\"\r\n      s3cmd_options \"--option value --option value .. if any\"\r\n      sync_dir \"local dir to sync s3 url to\"\r\n      verify_file \"verify file, raie exception is missing\"\r\n      mode \"dirs / files mode\"\r\n      umask \"user umask\"\r\n      manage_sync_dir \"whether to manage local sync dir\"\r\n    end\r\n\r\n**Delete a s3cmd sync dir**\r\n\r\n    s3cmd_dir \"foo\" do\r\n      action :delete\r\n    end\r\n\r\n**LWRP Options**\r\n\r\nParameters:\r\n\r\n- *s3cfg_file (default: `nil`, required: `true`)* - s3cmd config file location\r\n- *s3_url (default: `nil`, required: `true`)* - s3 bucket location to sync to `sync_dir`\r\n- *s3cmd_options (default: `nil`)* - s3cmd options for `s3cmd sync`\r\n- *sync_dir (default: `nil`, required: `true`)* - sync s3 url to this location\r\n- *verify_file (default: `nil`)* - verify file / location in `sync_dir` after `s3cmd sync`, raise exception is missing\r\n- *user (default: `node['s3cmd']['user']`)* - `sync_dir` file user ownership\r\n- *group (default: `node['s3cmd']['group']`)* - `sync_dir`file group ownership\r\n- *mode (default: `node['s3cmd']['mode']`)* - `sync_dir` file permissions\r\n- *umask (default: `node['s3cmd']['umask']`)* - sync_dir user exec umask\r\n- *manage_sync_dir (default: `node['s3cmd']['manage_sync_dir']`)* - whether to manage directory `sync_dir`\r\n- *s3_binary (default: `node['s3cmd']['binary']`)* - s3cmd command location\r\n\r\n\r\n\r\n## LWRP s3cmd_file\r\n\r\n\r\nLWRP `s3cmd_dir` is a wrapper for `s3cmd sync`.\r\n\r\n**Create a s3cmd sync dir resource**\r\n\r\n    s3cmd_file \"foo\" do\r\n      s3cfg_file \"s3cmd config file\"\r\n      s3_url \"s3 bucket file url\"\r\n      user \"user name\"\r\n      group \"group name\"\r\n      s3cmd_options \"--option value --option value .. if any\"\r\n      download_dir \"local dir to download s3 file\"\r\n      manage_download_dir true # whether to manage download_dir\r\n      extract_dir \"untar a tar file to this location\"\r\n      extract true # whether to extract a tar file\r\n      mode \"dirs / files mode\"\r\n      umask \"user umask\"\r\n    end\r\n\r\n**Delete a s3cmd file**\r\n\r\n    s3cmd_file \"foo\" do\r\n      s3_url \"s3 bucket file url\"\r\n      download_dir \"download location\"\r\n      extract_dir \"directory location\" # delete extract directory if specified\r\n      action :delete\r\n    end\r\n\r\n**LWRP Options**\r\n\r\nParameters:\r\n\r\n- *s3cfg_file (default: `nil`, required: `true`)* - s3cmd config file location\r\n- *s3_url (default: `nil`, required: `true`)* - s3 file location for `s3cmd get`\r\n- *s3cmd_options (default: `nil`)* - s3cmd options for `s3cmd get`\r\n- *download_dir (default: `node['s3cmd']['download_dir']`)* - download s3 file here\r\n- *extract (default: `false`)* - whether to extract a tar file\r\n- *extract_dir (default: `node['s3cmd']['download_dir']`)* - extract s3 tar file here\r\n- *user (default: `node['s3cmd']['user']`)* - files user ownership\r\n- *group (default: `node['s3cmd']['group']`)* - files group ownership\r\n- *mode (default: `node['s3cmd']['mode']`)* - files permissions\r\n- *umask (default: `node['s3cmd']['umask']`)* - files user exec umask\r\n- *manage_download_dir (default: `node['s3cmd']['manage_sync_dir']`)* - whether to manage directory `download_dir`\r\n- *s3_binary (default: `node['s3cmd']['binary']`)* - s3cmd command location\r\n\r\n\r\n\r\n## Contributing\r\n\r\n1. Fork the repository on Github\r\n2. Create a named feature branch (like `add_component_x`)\r\n3. Write your change\r\n4. Write tests for your change (if applicable)\r\n5. Run the tests (`rake`), ensuring they all pass\r\n6. Write new resource/attribute description to `README.md`\r\n7. Write description about changes to PR\r\n8. Submit a Pull Request using Github\r\n\r\n\r\n## Copyright & License\r\n\r\nAuthors:: Virender Khatri and [Contributors]\r\n\r\n<pre>\r\nLicensed under the Apache License, Version 2.0 (the \"License\");\r\nyou may not use this file except in compliance with the License.\r\nYou may obtain a copy of the License at\r\n\r\n    http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nUnless required by applicable law or agreed to in writing, software\r\ndistributed under the License is distributed on an \"AS IS\" BASIS,\r\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\nSee the License for the specific language governing permissions and\r\nlimitations under the License.\r\n</pre>\r\n\r\n\r\n[Chef]: https://www.chef.io/\r\n[s3cmd]: https://github.com/s3tools/s3cmd\r\n[Contributors]: https://github.com/vkhatri/chef-s3cmd/graphs/contributors\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}